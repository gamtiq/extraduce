"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t,e="/#/extraduce|#|extra-action//";function r(t){return Boolean(t)&&t.type===e&&Array.isArray(t.payload)}function o(t,e){var o=e||{};"processActionArray"in o||(o.processActionArray=!0),"skipFalsyAction"in o||(o.skipFalsyAction=!0);var n=o.historySize;"number"!=typeof n&&(n=0);var c=n?[]:null;return function(e,s){var i=o.filterAction,a=o.onStepEnd,p=o.onStepStart,u=o.postreduce,d=o.postreduceValueIsState,A=o.prepareAction,f=o.prereduce,y=o.prereduceValueIsState,l=o.processActionArray,x=o.reducerExtraArgs,v=o.skipFalsyAction,S=o.transformAction,g=Array.isArray(s)&&l?s:r(s)?s.payload:[s],h=e,E=exports.ProcessStep,m={sourceReducer:t,sourceState:e,sourceAction:s,state:h,history:c,stepSet:E,settings:o,data:o.data,stepStart:!1,stepEnd:!1};function P(t,e){e.step=t,"function"==typeof p&&(e.stepStart=!0,p(t,e),e.stepStart=!1)}function b(t,e){"function"==typeof a&&(e.stepEnd=!0,a(t,e),e.stepEnd=!1)}P(E.process,m);for(var k=0,F=g.length;k<F;k++){var I=g[k];if(m.action=I,m.actionIndex=k,m.firstAction=0===k,m.lastAction=k===F-1,m.validAction=!0,m.startState=m.reducedState=h,"function"==typeof A&&(P(E.prepareAction,m),I=m.action=A(I,m),b(E.prepareAction,m)),v&&!I?m.validAction=!1:"function"==typeof i&&(P(E.filterAction,m),m.validAction=i(I,m),b(E.filterAction,m)),m.validAction){var T=void 0;"function"==typeof S&&(P(E.transformAction,m),I=m.action=S(I,m),b(E.transformAction,m)),"function"==typeof f&&(P(E.prereduce,m),T=f(h,I,m),y&&(h=m.state=T),b(E.prereduce,m)),T=[h,I],x&&(P(E.reducerExtraArgs,m),T=T.concat("function"==typeof x?x(m):x),b(E.reducerExtraArgs,m)),P(E.reduce,m),h=m.state=t.apply(void 0,T),m.reducedState=h,b(E.reduce,m),"function"==typeof u&&(P(E.postreduce,m),T=u(h,I,m),d&&(h=m.state=T),b(E.postreduce,m)),c&&(P(E.history,m),c.length===n&&c.shift(),delete(T=Object.assign({time:(new Date).getTime()},m)).step,delete T.stepEnd,delete T.stepSet,delete T.stepStart,delete T.validAction,c.push(T),b(E.history,m))}}return b(E.process,m),h}}(t=exports.ProcessStep||(exports.ProcessStep={})).process="process",t.prepareAction="prepareAction",t.filterAction="filterAction",t.transformAction="transformAction",t.prereduce="prereduce",t.reducerExtraArgs="reducerExtraArgs",t.reduce="reduce",t.postreduce="postreduce",t.history="history",exports.default=o,exports.extraAction=function(){for(var t=[],r=0,o=arguments.length;r<o;r++){var n=r<0||arguments.length<=r?void 0:arguments[r];t.push.apply(t,Array.isArray(n)?n:[n])}return{type:e,payload:t}},exports.extraduce=o,exports.getExtraActionType=function(){return e},exports.isExtraAction=r,exports.setExtraActionType=function(t){e=t};
//# sourceMappingURL=extraduce.cjs.production.min.js.map
